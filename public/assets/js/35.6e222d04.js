(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{460:function(s,a,t){"use strict";t.r(a);var e=t(2),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("最近放弃使用 PC 主机了，所以又开始折腾起来树莓派了，买了一个硬盘柜接树莓派开 samba 服务存储下载的视频并提供给 Apple TV 的 infuse 观看。"),a("br"),s._v("\n不过遇到一个问题就是树莓派的 samba 网络传输速度有点不太理想只有 10MB/s！于是就开始了排查...")]),s._v(" "),a("p",[s._v("排查的步骤如下：")]),s._v(" "),a("ol",[a("li",[s._v("排查是不是磁盘传输速度限制，通过如下命令：")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("hdparm "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" /dev/sda  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里的 /dev/sda 改成对应的磁盘位置即可")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之后再运行这段，就可以知道硬盘的传输速度了")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/zero "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/mnt/data/test "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1M "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("oflag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("direct\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("排查是不是网络传输速度限制，通过"),a("code",[s._v("iperf3")]),s._v("工具，如下命令：")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果没有安装先通过下面命令安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" iperf3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过这个命令在树莓派上启动服务端")]),s._v("\niperf3 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过下面这个命令在另一台电脑上运行就可以知道网络传输的速度")]),s._v("\niperf3 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("树莓派的 IP 地址"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])])]),a("p",[s._v("通过上面的排查，确定我遇到的问题是网络导致的，因为我树莓派使用的是 Wi-Fi 连接，最后改成网线成功解决。"),a("br"),s._v("\n查个题外话 infuse 对 kmv 的支持好像不是很好对于其他的格式读取速度有点低。")]),s._v(" "),a("GiscusComments")],1)}),[],!1,null,null,null);a.default=r.exports}}]);